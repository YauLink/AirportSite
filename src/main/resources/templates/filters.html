<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Flights Filter</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
  <body>
    <div class="container">
      <header><h1>Filtering Flights</h1></header>

      <form method="post" th:action="@{/filters}">
        <label>Departure Airport:</label>
        <select name="airport_out">
          <option value="">-- not selected --</option>
          <option th:each="airport : ${airports}"
                  th:value="${airport.code}"
                  th:text="${airport.name}"
                  th:selected="${airport.code == currentAirportOut}">
          </option>
        </select>

        <label>Arrival Airport:</label>
        <select name="airport_in">
          <option value="">-- not selected --</option>
          <option th:each="airport : ${airports}"
                  th:value="${airport.code}"
                  th:text="${airport.name}"
                  th:selected="${airport.code == currentAirportIn}">
          </option>
        </select>

        <button type="submit" class="btn btn-add">Find Flights</button>
      </form>

      <div class="table-wrapper" th:if="${flying != null}">
        <table>
          <thead>
          <tr>
            <th>From</th>
            <th>To</th>
            <th>Departure Date</th>
            <th>Flight Number</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="flight : ${flying}">
            <td th:text="${flight.departureAirport}"></td>
            <td th:text="${flight.arrivalAirport}"></td>
            <td th:text="${flight.scheduledDeparture}"></td>
            <td th:text="${flight.flightNo}"></td>
          </tr>
          </tbody>
        </table>
      </div>

      <div th:if="${maxCountFlying > 1}">
        <p>Page <span th:text="${currentPage}"></span> of <span th:text="${maxCountFlying}"></span></p>
        <div>
          <a th:href="@{/filters(page=${currentPage - 1}, airport_out=${currentAirportOut}, airport_in=${currentAirportIn})}" th:if="${currentPage > 1}">Previous</a>
          <a th:href="@{/filters(page=${currentPage + 1}, airport_out=${currentAirportOut}, airport_in=${currentAirportIn})}" th:if="${currentPage < maxCountFlying}">Next</a>
        </div>
      </div>

      <button class="btn btn-edit"
              th:onclick="|location.href='@{/}'|">
        To Main Page
      </button>

      <footer>&copy; 2025 Airport System</footer>
    </div>
  </body>
</html>